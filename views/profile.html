% include("comp_header_navbar")

<!-- Banner, profil billede og profil bar -->
<div class="w-full">
    <div class="relative w-full flex flex-col items-center lg:items-start">
        <img class="w-full h-[300px] object-cover shadow-xl shadow-[#00000030]" src="../images/profile_banners/{{user['user_banner']}}" alt="">
        <img class="absolute bottom-0 translate-y-16 w-48 h-48 rounded-full shadow-xl shadow-[#00000030] md:left-32" src="../images/profile_images/{{user['user_profilepic']}}" alt="users profile pic">
    </div>
    <div class="flex flex-col items-center gap-3 w-full bg-[#DFD7D4] py-4 pt-20 shadow-xl shadow-[#00000030] md:flex-row md:pl-80 md:gap-6 md:pt-4 lg:pl-0 lg:justify-center lg:gap-14">
        <p>Følger: {{user['user_total_following']}}</p>
        <p>Følgere: {{user['user_total_followers']}}</p>
        <p>Opskrifter: {{user['user_total_recipes']}}</p>
        <button onclick="edit_profile()" class="flex gap-2 font-semibold md:absolute md:right-4">Edit profile <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M5 19h1.4l8.625-8.625l-1.4-1.4L5 17.6V19ZM19.3 8.925l-4.25-4.2l1.4-1.4q.575-.575 1.413-.575t1.412.575l1.4 1.4q.575.575.6 1.388t-.55 1.387L19.3 8.925ZM17.85 10.4L7.25 21H3v-4.25l10.6-10.6l4.25 4.25Zm-3.525-.725l-.7-.7l1.4 1.4l-.7-.7Z"/></svg></button>
    </div>
</div>


<!-- Profil info -->
<div class="w-full flex justify-center md:justify-start md:pl-80 my-10 mb-16 lg:pl-0 lg:justify-center">
    <div class="flex flex-col items-center gap-4 w-[85%] max-w-[600px] md:flex-row md:items-start md:justify-center">
        <section class="flex flex-col gap-2 text-center md:text-start w-full md:w-[48%]">
            <h2 class="font-semibold text-xl pt-2 pb-3">{{user['user_first_name']}} {{user['user_last_name']}}</h2>
            <p>Fødsesldag: {{user['user_birthday']}}</p>
            <p>Email: {{user['user_email']}}</p>
        </section>
        <section class="flex flex-col gap-2 text-center md:text-start w-full md:w-[48%]">
            <h2 class="font-semibold text-xl py-2">{{user['user_username']}}</h2>
            <p>Aktuelle opskrifter: {{user['user_total_recipes']}}</p>
            <p>Aktuelle samlinger: {{user['user_total_collections']}}</p>
            <p>Medlem siden {{user['user_created_at']}}</p>
        </section>
    </div>
</div>

<!-- 3 af Profilens Opskrifter -->
<section class="flex flex-col items-center gap-6 py-12 w-full bg-[#DFD7D4] shadow-xl shadow-[#00000030]">
    <a href="/{{user['user_username']}}/opskrifter" class="flex gap-2 text-2xl sm:4xl mt-2 mb-4 font-semibold border-b-2 border-[#2a2a2a00] hover:border-b-2 hover:border-[#2a2a2a] transition duration-300">{{user['user_first_name']}}'s opskrifter <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16.15 13H5q-.425 0-.713-.288T4 12q0-.425.288-.713T5 11h11.15L13.3 8.15q-.3-.3-.288-.7t.288-.7q.3-.3.713-.313t.712.288L19.3 11.3q.15.15.213.325t.062.375q0 .2-.063.375t-.212.325l-4.575 4.575q-.3.3-.712.288t-.713-.313q-.275-.3-.288-.7t.288-.7L16.15 13Z"/></svg></a>
    <section class="flex justify-center items-start gap-8 w-[85%]">
        
        <a href="/opret-opskrift" class="relative flex justify-center items-center w-1/3 lg:w-[250px] rounded-xl">
            <img src="../images/recipe_thumbnails/default_recipe.jpg" class="w-full h-[150px] lg:h-[350px] object-cover rounded-xl shadow-lg shadow-[#00000030]" alt="">
            <div class="absolute top-0 w-full h-full bg-[#00000070] hover:bg-[#00000040] rounded-xl transition duration-300"></div> <!-- Overlay --> 
            <section class="absolute text-white flex flex-col items-center">
                <svg class="font-semibold" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M11 13H5v-2h6V5h2v6h6v2h-6v6h-2v-6Z"/></svg>
                <p>Opret opskriftssamling</p>
            </section>
        </a>

        % for recipe in recipes:
            <a href="/opskrift/{{recipe['recipe_id']}}" class="w-1/3 lg:w-[250px] rounded-xl">
                <img src="../images/recipe_thumbnails/{{recipe['recipe_thumbnail']}}" class="w-full h-[150px] lg:h-[350px] rounded-xl object-cover shadow-lg shadow-[#00000030]" alt="">
                <p class="md:text-xl font-playfair-display text-center pt-4" style="overflow-wrap: break-word; white-space: normal;">{{recipe['recipe_name']}}</p>
            </a>
        % end

    </section>
</section>


    <!-- 3 af dine opskriftsamlinger -->
    <section class="flex flex-col items-center w-[85%] sm:w-[60%]text-center py-10">
        <a href="/{{user['user_username']}}/samlinger" class="flex gap-2 text-2xl sm:4xl pb-1 mt-6 mb-4 font-semibold border-b-2 border-[#2a2a2a00] hover:border-b-2 hover:border-[#2a2a2a] transition duration-300">{{user['user_first_name']}}'s opskriftssamlinger <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16.15 13H5q-.425 0-.713-.288T4 12q0-.425.288-.713T5 11h11.15L13.3 8.15q-.3-.3-.288-.7t.288-.7q.3-.3.713-.313t.712.288L19.3 11.3q.15.15.213.325t.062.375q0 .2-.063.375t-.212.325l-4.575 4.575q-.3.3-.712.288t-.713-.313q-.275-.3-.288-.7t.288-.7L16.15 13Z"/></svg></a>
        <p class="max-w-[550px] text-center">Saml og kategoriser alle dine yndlingsopskrifter i dine egne opskriftsamlinger, del dem med venner og familie og skab jeres fælles online opskriftskartoteker.</p>
        <section class="flex justify-center items-start gap-8 w-full py-8">
            
            <a href="/opret-samling" class="relative flex justify-center items-center w-1/3 lg:w-[250px]">
                <img src="../images/collection_thumbnails/default_collection.jpg" class="w-full h-[150px] lg:h-[350px] object-cover rounded-xl shadow-lg shadow-[#00000030]" alt="">
                <div class="absolute top-0 w-full h-full bg-[#00000070] hover:bg-[#00000040] rounded-xl transition duration-300"></div> <!--Overlay-->
                <section class="absolute text-white flex flex-col items-center">
                    <svg class="font-semibold" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M11 13H5v-2h6V5h2v6h6v2h-6v6h-2v-6Z"/></svg>
                    <p>Opret opskriftssamling</p>
                </section>
            </a>

            % for collection in collections:
                <a href="/samling/{{collection['collection_id']}}" class="w-1/3 lg:w-[250px] rounded-xl ">
                    <img src="../images/recipe_thumbnails/{{collection['collection_thumbnail']}}" class="w-full h-[150px] lg:h-[350px] object-cover rounded-xl shadow-lg shadow-[#00000030]" alt="">
                    <p class="md:text-xl font-playfair-display text-center pt-4" style="overflow-wrap: break-word; white-space: normal;">{{collection['collection_name']}}</p>
                </a>
            % end
        </section>
    </section>

    <!-- Edit profile -->
    <div id="edit_profile" class="hidden z-50 top-0 w-full h-screen bg-[#00000060]"> <!-- overlay -->
        <div class="flex flex-col justify-center items-center w-[85%] max-w-[600px] bg-[#DFD7D4] mx-auto mt-[10%] py-12 px-4 rounded-3xl shadow-2xl shadow-[#00000030] ">
            <h2 class="font-semibold text-xl">Rediger profil</h2>
            <section class="flex flex-col items-center gap-4 mt-8 w-[80%] max-w-[450px]">
                <input placeholder="{{user['user_first_name']}}" type="text" class="pl-3 py-1 outline-none w-full rounded-lg shadow-lg shadow-[#00000030]">
                <input placeholder="{{user['user_last_name']}}" type="text" class="pl-3 py-1 outline-none w-full rounded-lg shadow-lg shadow-[#00000030]">
                <input placeholder="{{user['user_username']}}" type="text" class="pl-3 py-1 outline-none w-full rounded-lg shadow-lg shadow-[#00000030]">
                <input placeholder="{{user['user_email']}}" type="text" class="pl-3 py-1 outline-none w-full rounded-lg shadow-lg shadow-[#00000030]">
            </section>
            <section class="flex justify-between flex-col-reverse sm:flex-row gap-4 w-[80%] max-w-[450px] mt-10">
                <button onclick="edit_profile()" class="px-6 py-1 rounded-xl font-semibold text-[#524646] border-2 border-[#524646] hover:border-[#493e3e] hover:text-[#493e3e] shadow-md shadow-[#00000030] ">Annuller</button>
                <button onclick="edit_profile()" class="px-6 py-1 rounded-xl font-semibold text-white bg-[#524646] hover:bg-[#493e3e] shadow-md shadow-[#00000030] transition duration-300">Opdater profil</button>
            </section>
        </div>
    </div>

    <script src="../js/toggle_edit_profile.js"></script>
% include("comp_footer")